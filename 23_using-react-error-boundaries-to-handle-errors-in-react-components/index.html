<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Using React Error Boundaries to handle errors in React Components</title>
</head>
<body>
<a href="https://egghead.io/lessons/react-using-react-error-boundaries-to-handle-errors-in-react-components" target="_blank">https://egghead.io/lessons/react-using-react-error-boundaries-to-handle-errors-in-react-components</a>
<br>
<br>
<div id="root"></div>

<!-- ReactJS create element -->
<script src="https://unpkg.com/react@16.12.0/umd/react.development.js"></script>
<script src="https://unpkg.com/react-dom@16.12.0/umd/react-dom.development.js"></script>
<script src="https://unpkg.com/@babel/standalone@7.14.9/babel.js"></script>
<script src="https://unpkg.com/react-error-boundary@1.2.5/dist/umd/react-error-boundary.js"></script>


<script type="text/babel">

    const ErrorBoundary = ReactErrorBoundary.ErrorBoundary

    if(false) {
        class ErrorBoundary extends React.Component {

            state = {error: null}

            static getDerivedStateFromError(error) {
                return {error}
            }

            render() {
                const {error} = this.state
                if (error) {
                    return <this.props.FallbackComponent error={error}/>
                }
                return (
                    this.props.children
                )
            }
        }
    }

    const rootElem = document.getElementById('root');

    function Bomb(){
        throw new Error('CABOOM!!!')
    }

    function ErrorFallback({error}){
        return (
            <div>
                <p>Something went wrong</p>
                <pre>{error.message}</pre>
            </div>
        )
    }

    function App(){

        const [explode,setExplode] = React.useState(false);

        return (
            <>
                <ErrorBoundary FallbackComponent={ErrorFallback}>
                    <div>
                        <button onClick={() => setExplode(true)}>Bomb!</button>
                    </div>
                    <ErrorBoundary FallbackComponent={ErrorFallback}>
                    {explode
                        ? <Bomb/>
                        : "Push the button!"
                    }
                    </ErrorBoundary>
                </ErrorBoundary>
            </>
        )

    }

    ReactDOM.render(<App />,rootElem)

</script>

</body>
</html>